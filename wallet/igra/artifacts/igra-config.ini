; export KASPA_IGRA_WALLET_SECRET=devnet-test-secret-please-change
; Wallet secret is a 24-word BIP39 mnemonic or other supported secret.
; Used by igra-core to encrypt stored wallet material at rest.
; Responsibility: operator of each signer/coordinator instance.
; Set before first run and keep consistent across restarts for the same node.

[service]
; Kaspa node RPC URL used for UTXO queries and (optionally) transaction submission.
; Used by igra-service when building/finalizing PSKT.
; Responsibility: operator; point to devnet kaspad gRPC endpoint.
; Set when bootstrapping environment or when RPC endpoint changes.
node_rpc_url = grpc://127.0.0.1:16110
; Local data directory used for RocksDB and runtime files.
; Used by igra-core storage and config persistence.
; Responsibility: operator; should be writable.
; Set once per node; keep stable to preserve state.
data_dir = ./.igra

[pskt]
; Comma-separated Kaspa source addresses that correspond to the multisig UTXOs.
; Used by PSKT builder to select inputs from Kaspa RPC.
; Responsibility: bridge/integration operator; must match multisig redeem script.
; Update when multisig funding addresses change.
source_addresses = kaspadev:qzjwhmuwx4fmmxleyykgcekr2m2tamseskqvl859mss2jvz7tk46j2qyvpukx,kaspadev:qpjfl8wzj94zc6wtdy6fh8yy7apywvnpqdfnvay8s460gd56yx5rwegde7cxa
; Hex-encoded multisig redeem script for PSKT construction and verification.
; Used by PSKT builder and signers to validate script matches group.
; Responsibility: multisig setup coordinator; must match group pubkeys/threshold.
; Update only when the multisig group changes.
redeem_script_hex = 5220a4ebef8e3553bd9bf9212c8c66c356d4beee198580cf9e85dc20a9305e5daba920b93ff1c2c3c89b5284e7e62c090032a3dac67a62b8b0372f9417ee5ee58b6d7b20ca1582d546037ff74ebc280c84a40d7118c0959b7885b94eba69a578b273deec53ae
; Number of signature operations required in the redeem script.
; Used by PSKT builder to set script parameters and validation rules.
; Responsibility: multisig setup coordinator.
; Must match threshold M in group config.
sig_op_count = 2
; Fee payment mode for PSKT (recipient_pays or other supported values).
; Used by PSKT builder to allocate fee between outputs.
; Responsibility: policy/ops owner; set per integration requirements.
; Update when fee strategy changes.
fee_payment_mode = recipient_pays
; Fee value in sompi (if applicable for fee mode).
; Used by PSKT builder when fee mode requires explicit fee.
; Responsibility: ops owner; set based on desired fee policy.
; Keep at 0 if recipient_pays or fee is computed elsewhere.
fee_sompi = 0
; Address for change outputs when inputs exceed spend + fee.
; Used by PSKT builder; must be a valid devnet address.
; Responsibility: multisig setup coordinator or wallet ops.
; Update if change destination should move.
change_address = kaspadev:qrz9yajzk65v0wyrk0s54drcauzd8rlgaagrl74cjmj042w4crqkust5wycfq

[hd]
; BIP39 mnemonics used to derive signer keys (comma-separated for multiple signers).
; Used by igra-core HD key derivation on startup.
; Responsibility: signer operators; one mnemonic per signer in this shared config.
; Update only when rotating signing keys.
mnemonics = abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about,legal winner thank year wave sausage worth useful legal winner thank yellow,letter advice cage absurd amount doctor acoustic avoid letter advice cage above
; Number of required signatures for this multisig group.
; Used by signing logic and PSKT finalization.
; Responsibility: multisig setup coordinator; must match group threshold.
; Update only if group threshold changes.
required_sigs = 2

[runtime]
; Enables local test-mode overrides (PSKT built from config).
; Used by service flow to allow deterministic local testing.
; Responsibility: developer/operator; set true for tests only.
; Disable in production.
test_mode = true
; Destination address used when test_mode is enabled.
; Used by PSKT builder for test-only flows.
; Responsibility: developer/operator; set for local testing.
; Update per test scenario.
test_recipient = kaspadev:qzunluwzc0yfk55yulnzczgqx23a43n6v2utqde0jst7uhh93dkhkp80l2wca
; Amount (sompi) used when test_mode is enabled.
; Used by PSKT builder for test-only flows.
; Responsibility: developer/operator; set for local testing.
; Update per test scenario.
test_amount_sompi = 123456
; Session timeout for coordination (seconds).
; Used by signer/coordinator to enforce time limits.
; Responsibility: operator; adjust based on expected latency.
; Update when timeout policy changes.
session_timeout_seconds = 60

[signing]
; Signing backend implementation (e.g., threshold).
; Used by service to select signing algorithm.
; Responsibility: operator; should align with code support.
; Update only if backend changes.
backend = threshold

[rpc]
; JSON-RPC listener address for the service API.
; Used by igra-service to expose signing_event.submit.
; Responsibility: operator; must be reachable by event sources.
; Update when API binding changes.
addr = 127.0.0.1:8088
; Enable/disable JSON-RPC server.
; Used by igra-service on startup.
; Responsibility: operator; disable if using file watcher only.
; Update per deployment topology.
enabled = true

[policy]
; Comma-separated allowlist of recipient addresses.
; Used by policy validation to permit transfers.
; Responsibility: policy owner; must include allowed destinations.
; Update when destination policy changes.
allowed_destinations = kaspadev:qr9ptqk4gcphla6whs5qep9yp4c33sy4ndugtw2whf56279jw00wcqlxl3lq3
; Minimum transfer amount in sompi.
; Used by policy validation.
; Responsibility: policy owner; enforce minimum value.
; Update when policy changes.
min_amount_sompi = 1000000
; Maximum transfer amount in sompi.
; Used by policy validation.
; Responsibility: policy owner; enforce cap per request.
; Update when policy changes.
max_amount_sompi = 100000000000
; Maximum daily volume in sompi across requests.
; Used by policy tracking (RocksDB volume CF).
; Responsibility: policy owner; enforce daily cap.
; Update when policy changes.
max_daily_volume_sompi = 500000000000
; Require a reason/memo field on signing requests.
; Used by policy validation.
; Responsibility: policy owner.
; Update when memo requirements change.
require_reason = false

[hyperlane]
; Comma-separated Hyperlane validator public keys (secp256k1, hex).
; Used to verify signatures on Hyperlane-sourced signing events.
; Responsibility: bridge/integration operator; must match validator set.
; Update when validator membership rotates.
; Format: compressed secp256k1 pubkeys, hex, without 0x prefix (0x is accepted but optional).
validators = 039a8d46063004a62914db7eb40e445e2500331c7f1263d4596e3e3cc6bc7bc82c,02f5c3507cd1dc83a1e890a830bcfd452ea12ee93537e76bc30a3130ac7138203c
; Threshold required when using legacy flat validators (no per-domain sections).
; Used only for backward compatibility; prefer explicit per-domain configuration.
threshold = 2
; Optional per-destination-domain ISM config (preferred). Each section key is the DESTINATION domain id.
; [hyperlane.domain.<dest_domain_u32>]
; validators=0x...,0x...     ; required, secp256k1 ECDSA pubkeys for that DEST chainâ€™s ISM
; threshold=2                ; required signatures for that DEST chain
; mode=message_id_multisig   ; or merkle_root_multisig, matches the DEST chain ISM type
; Defaults when no [hyperlane.domain.*] sections are provided:
;   - If `validators` above is empty: Hyperlane ISM is effectively disabled.
;   - If `validators` above is set: a placeholder destination domain=0 (Kaspa default) is created,
;     threshold = hyperlane.threshold, mode = message_id_multisig.
; These defaults preserve backward compatibility but do not reflect real ISM domains. For ISM-accurate validation,
; add explicit destination-domain sections matching your deployed ISM settings.
; Optional polling interval for local event watcher (seconds).
; Used by hyperlane events_dir watcher when enabled.
; Responsibility: operator; increase if filesystem polling load is a concern.
poll_secs = 10

[group]
; M threshold (signatures required) for the multisig group.
; Used by signing logic and PSKT validation.
; Responsibility: multisig setup coordinator; must match script.
; Update only when group threshold changes.
threshold_m = 2
; N number of members in the multisig group.
; Used by group validation and coordination.
; Responsibility: multisig setup coordinator.
; Update only when group membership changes.
threshold_n = 3
; Comma-separated member public keys (secp256k1) for multisig.
; Used by group ID derivation and signing verification.
; Responsibility: multisig setup coordinator; must match redeem script.
; Update only when group membership changes.
member_pubkeys = 02a4ebef8e3553bd9bf9212c8c66c356d4beee198580cf9e85dc20a9305e5daba9,02b93ff1c2c3c89b5284e7e62c090032a3dac67a62b8b0372f9417ee5ee58b6d7b,02ca1582d546037ff74ebc280c84a40d7118c0959b7885b94eba69a578b273deec
; Fee rate in sompi per gram for PSKT fee estimation.
; Used by PSKT builder when fee is computed.
; Responsibility: operator; set based on network conditions.
; Update when fee policy changes.
fee_rate_sompi_per_gram = 0
; Kaspa finality threshold (blue score) required before spending UTXOs.
; Used by UTXO selection logic when validating confirmations.
; Responsibility: operator; set to 0 for devnet.
; Update for production safety.
finality_blue_score_threshold = 0
; Dust threshold in sompi to avoid creating dust outputs.
; Used by PSKT builder to validate outputs.
; Responsibility: operator; set per network policy.
; Update when dust policy changes.
dust_threshold_sompi = 0
; Minimum amount the recipient must receive (sompi).
; Used by PSKT builder/policy to prevent tiny outputs.
; Responsibility: policy owner.
; Update when policy changes.
min_recipient_amount_sompi = 0
; Session timeout for group coordination (seconds).
; Used by coordination logic as a guardrail.
; Responsibility: operator; should match runtime section unless overridden.
; Update when timeout policy changes.
session_timeout_seconds = 60

[iroh]
; Iroh group ID shared across all signers for P2P coordination.
; Used by iroh transport to join the same gossip group.
; Responsibility: group coordinator; must be identical across signers.
; Update only when rotating group identity.
group_id = d44bf35c6f6f52b1c245fb85ef1ae2178e4f621c9e6d53f6a36acd03aa25b81c
; Verifier keys allowed to publish Iroh messages (peer_id:pubkey pairs).
; Used by transport authentication and message filtering.
; Responsibility: group coordinator; must include all allowed peers.
; Update when peers change.
verifier_keys = coordinator-1:02a4ebef8e3553bd9bf9212c8c66c356d4beee198580cf9e85dc20a9305e5daba9

[signer-1.service]
; Signer-specific data directory override.
; Used by signer instance for its RocksDB and config state.
; Responsibility: signer operator; must be unique per signer.
; Set per signer deployment.
data_dir = ./.igra/signer-1

[signer-1.hd]
; Signer-specific mnemonic used to derive signing keys.
; Used by signer instance on startup.
; Responsibility: signer operator; keep secret.
; Rotate only when rotating keys.
mnemonics = abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon abandon about

[signer-1.rpc]
; Signer-specific JSON-RPC listen address.
; Used by signer instance if running its own API server.
; Responsibility: signer operator; must not conflict with other signers.
; Set per signer deployment.
addr = 127.0.0.1:8088

[signer-1.iroh]
; Iroh peer ID for this signer.
; Used by transport layer to identify the signer.
; Responsibility: signer operator; must be unique.
; Set per signer deployment.
peer_id = signer-1
; Seed for iroh keypair (hex-encoded).
; Used by transport layer to derive stable peer keys.
; Responsibility: signer operator; keep secret.
; Rotate only when rotating transport identity.
signer_seed_hex = 000102030405060708090a0b0c0d0e0f101112131415161718191a1b1c1d1e1f
; Iroh group ID for this signer (must match global iroh.group_id).
; Used by transport layer to join the group.
; Responsibility: signer operator; keep in sync with group.
; Update only when group_id changes.
group_id = d44bf35c6f6f52b1c245fb85ef1ae2178e4f621c9e6d53f6a36acd03aa25b81c
; Network ID for iroh transport (0=devnet/local).
; Used by transport layer for environment tagging.
; Responsibility: operator; set per environment.
; Update when moving environments.
network_id = 0
; Verifier keys for iroh message authentication (peer_id:pubkey pairs).
; Used to validate inbound messages.
; Responsibility: group coordinator; must include all allowed peers.
; Update when peers change.
verifier_keys = signer-1:03a107bff3ce10be1d70dd18e74bc09967e4d6309ba50d5f1ddc8664125531b8,signer-2:29acbae141bccaf0b22e1a94d34d0bc7361e526d0bfe12c89794bc9322966dd7,signer-3:2543b92ff1095511476adc8369db6ddc933665a11978dda1404ee1066ca9559d

[signer-2.service]
; Signer-specific data directory override.
; Used by signer instance for its RocksDB and config state.
; Responsibility: signer operator; must be unique per signer.
; Set per signer deployment.
data_dir = ./.igra/signer-2

[signer-2.hd]
; Signer-specific mnemonic used to derive signing keys.
; Used by signer instance on startup.
; Responsibility: signer operator; keep secret.
; Rotate only when rotating keys.
mnemonics = legal winner thank year wave sausage worth useful legal winner thank yellow

[signer-2.rpc]
; Signer-specific JSON-RPC listen address.
; Used by signer instance if running its own API server.
; Responsibility: signer operator; must not conflict with other signers.
; Set per signer deployment.
addr = 127.0.0.1:8089

[signer-2.iroh]
; Iroh peer ID for this signer.
; Used by transport layer to identify the signer.
; Responsibility: signer operator; must be unique.
; Set per signer deployment.
peer_id = signer-2
; Seed for iroh keypair (hex-encoded).
; Used by transport layer to derive stable peer keys.
; Responsibility: signer operator; keep secret.
; Rotate only when rotating transport identity.
signer_seed_hex = 202122232425262728292a2b2c2d2e2f303132333435363738393a3b3c3d3e3f
; Iroh group ID for this signer (must match global iroh.group_id).
; Used by transport layer to join the group.
; Responsibility: signer operator; keep in sync with group.
; Update only when group_id changes.
group_id = d44bf35c6f6f52b1c245fb85ef1ae2178e4f621c9e6d53f6a36acd03aa25b81c
; Network ID for iroh transport (0=devnet/local).
; Used by transport layer for environment tagging.
; Responsibility: operator; set per environment.
; Update when moving environments.
network_id = 0
; Verifier keys for iroh message authentication (peer_id:pubkey pairs).
; Used to validate inbound messages.
; Responsibility: group coordinator; must include all allowed peers.
; Update when peers change.
verifier_keys = signer-1:03a107bff3ce10be1d70dd18e74bc09967e4d6309ba50d5f1ddc8664125531b8,signer-2:29acbae141bccaf0b22e1a94d34d0bc7361e526d0bfe12c89794bc9322966dd7,signer-3:2543b92ff1095511476adc8369db6ddc933665a11978dda1404ee1066ca9559d

[signer-3.service]
; Signer-specific data directory override.
; Used by signer instance for its RocksDB and config state.
; Responsibility: signer operator; must be unique per signer.
; Set per signer deployment.
data_dir = ./.igra/signer-3

[signer-3.hd]
; Signer-specific mnemonic used to derive signing keys.
; Used by signer instance on startup.
; Responsibility: signer operator; keep secret.
; Rotate only when rotating keys.
mnemonics = letter advice cage absurd amount doctor acoustic avoid letter advice cage above

[signer-3.rpc]
; Signer-specific JSON-RPC listen address.
; Used by signer instance if running its own API server.
; Responsibility: signer operator; must not conflict with other signers.
; Set per signer deployment.
addr = 127.0.0.1:8090

[signer-3.iroh]
; Iroh peer ID for this signer.
; Used by transport layer to identify the signer.
; Responsibility: signer operator; must be unique.
; Set per signer deployment.
peer_id = signer-3
; Seed for iroh keypair (hex-encoded).
; Used by transport layer to derive stable peer keys.
; Responsibility: signer operator; keep secret.
; Rotate only when rotating transport identity.
signer_seed_hex = 404142434445464748494a4b4c4d4e4f505152535455565758595a5b5c5d5e5f
; Iroh group ID for this signer (must match global iroh.group_id).
; Used by transport layer to join the group.
; Responsibility: signer operator; keep in sync with group.
; Update only when group_id changes.
group_id = d44bf35c6f6f52b1c245fb85ef1ae2178e4f621c9e6d53f6a36acd03aa25b81c
; Network ID for iroh transport (0=devnet/local).
; Used by transport layer for environment tagging.
; Responsibility: operator; set per environment.
; Update when moving environments.
network_id = 0
; Verifier keys for iroh message authentication (peer_id:pubkey pairs).
; Used to validate inbound messages.
; Responsibility: group coordinator; must include all allowed peers.
; Update when peers change.
verifier_keys = signer-1:03a107bff3ce10be1d70dd18e74bc09967e4d6309ba50d5f1ddc8664125531b8,signer-2:29acbae141bccaf0b22e1a94d34d0bc7361e526d0bfe12c89794bc9322966dd7,signer-3:2543b92ff1095511476adc8369db6ddc933665a11978dda1404ee1066ca9559d
