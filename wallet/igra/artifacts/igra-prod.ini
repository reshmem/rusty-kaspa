; Production-style configuration for a single signer/coordinator instance.
; Each node must have its own file with its own secrets and RPC ports.

; export KASPA_IGRA_WALLET_SECRET=<24-word-bip39>

[service]
; Kaspa node RPC URL (mainnet/testnet as appropriate).
node_rpc_url = grpc://127.0.0.1:16110
; Data directory unique to this node.
data_dir = /var/lib/igra

[pskt]
; Multisig funding source addresses (shared across the group).
source_addresses = <kaspanet:...>,<kaspanet:...>
; Multisig redeem script for the group (shared across the group).
redeem_script_hex = <hex>
; Number of required signatures (must match group threshold).
sig_op_count = 2
; Fee policy.
fee_payment_mode = recipient_pays
fee_sompi = 0
; Change address (shared across the group).
change_address = <kaspanet:...>

[hd]
; NOTE: In production, do NOT list all mnemonics here.
; Leave empty or omit this section if using per-node signer sections below.
mnemonics =
required_sigs = 2

[runtime]
; Disable test mode in production.
test_mode = false
session_timeout_seconds = 600

[signing]
backend = threshold

[rpc]
; JSON-RPC listener for this node.
addr = 0.0.0.0:8088
enabled = true

[policy]
; Allowed destinations and limits (shared policy across group).
allowed_destinations = <kaspanet:...>
min_amount_sompi = 1000000
max_amount_sompi = 100000000000
max_daily_volume_sompi = 500000000000
require_reason = true

[hyperlane]
; Validator public keys used to verify Hyperlane-signed events (legacy flat list).
; Format: compressed secp256k1 pubkeys (hex), 0x prefix optional (kept short for ini readability).
validators = <pubkey1>,<pubkey2>
; Threshold required when using the legacy flat validators (no per-domain sections); must be >0 and <= validator count.
threshold = 2
; Preferred: per-destination-domain ISM config. Add one section per DESTINATION domain:
; [hyperlane.domain.<dest_domain_u32>]
; validators=0x...,0x...   ; required, ECDSA secp256k1 pubkeys for that destination ISM
; threshold=2              ; required signatures for that destination
; mode=message_id_multisig ; or merkle_root_multisig
; If no [hyperlane.domain.*] sections are provided but validators are set above, a placeholder destination
; domain=0 (Kaspa default) is created with mode=message_id_multisig and threshold=hyperlane.threshold.
; events_dir only if using file watcher; otherwise leave empty.
; events_dir = /var/lib/igra/hyperlane-events
poll_secs = 10

[group]
; Multisig group parameters (shared across group).
threshold_m = 2
threshold_n = 3
member_pubkeys = <pubkey1>,<pubkey2>,<pubkey3>
fee_rate_sompi_per_gram = 0
finality_blue_score_threshold = 0
; Production dust and minimum output thresholds should be set.
dust_threshold_sompi = 0
min_recipient_amount_sompi = 0
session_timeout_seconds = 600

[iroh]
; Shared Iroh group ID for the signer mesh.
group_id = <hex>
; Allowed peers with their verifier keys.
verifier_keys = signer-1:<pubkey>,signer-2:<pubkey>,signer-3:<pubkey>

[signer.service]
; Node-specific data directory override (optional).
data_dir = /var/lib/igra/signer

[signer.hd]
; Node-specific mnemonic for this signer only.
mnemonics = <24-word-bip39>

[signer.rpc]
; Node-specific RPC bind address.
addr = 0.0.0.0:8088

[signer.iroh]
; Node-specific iroh identity.
peer_id = signer-1
signer_seed_hex = <hex>
group_id = <hex>
network_id = 0
verifier_keys = signer-1:<pubkey>,signer-2:<pubkey>,signer-3:<pubkey>
